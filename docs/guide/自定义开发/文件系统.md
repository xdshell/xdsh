# 文件系统

Xdsh的文件系统非常简单，以json文件的方式构成，主要包含三种格式的文件：目录/文本文件/链接。每个文件有多个属性，属性影响命令的执行。

## 加载方法

### 源文件

从url读取json文件并加载。

```javascript
let file = readFile('/xdsh/image/image.json');
if (file) {
  let img = JSON.parse(file);
  xdsh.loadImage(img);
}
else alert('Loading image failed');
```

### 命令行

除了在源文件中写入，也可以在命令行中加载。

使用命令`import`打开json文件即可读入。

使用命令`export`下载当前文件系统镜像。

## json格式

文件系统的默认根目录是'~'，以根目录为起点展开文件树。整体格式如下：

```json
{
  "type": "dir",
  "content": {
    ...
  }
}
```

其中每个文件的基本格式如下：

```json
{
  "type": ...,
  "content": ...
}
```

## 目录

目录的格式如下：

```json
目录名: {
  "type": "dir",
  "content": {
    其他目录/文本文件/链接
  }
}
```

## 文本文件

文本文件的格式如下：

```json
文本文件名: {
  "type": "file",
  "content": "文本"
}
```

## 链接

链接的格式如下：

```json
链接名: {
  "type": "link",
  "content": "url链接"
}
```

## 栗子

```json
{
  "type": "dir",
  "content": {
    "dir0": {
      "type": "dir",
      "content": {
        "file0": {
          "type": "file",
          "content": "This is file0."
        },
        "file1": {
          "type": "file",
          "content": "This is file1."
        }
      }
    },
    "dir1": {
      "type": "dir",
      "content": {
        "link0": {
          "type": "link",
          "content": "https://github.com"
        }
      }
    }
  }
}
```